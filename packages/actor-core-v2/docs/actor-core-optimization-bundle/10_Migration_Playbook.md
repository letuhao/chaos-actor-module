# 10 — Migration Playbook (Do in this order)

### Phase 1 — Finish placeholders (build green)
- Files: models/effects/combat_effect.go, services/cache/redis_cache.go, services/monitoring/performance_monitor.go
- Action: Implement missing bodies (constructors, monitors, redis getters) as per `03_File-by-File_Steps.md`.

### Phase 2 — Unify stat keys
- Replace string literals with `constants.*` (generated by schema).
- Update `constants/derived_stats.go` values to **snake_case**.

### Phase 3 — Pipeline refactor
- Implement steps and refactor resolver as in `05_Formula_Pipeline_Refactor.md`.

### Phase 4 — Concurrency-safe cache + DAG
- Add `sync.RWMutex`; add versioned keys; add DAG builder + cycle detection.

### Phase 5 — Tests
- Golden + property + race + parity tests.

### Phase 6 — Observability
- Wire `PerformanceMonitor` with context, counters, alert checks.

### Phase 7 — CI/Lint/Bench
- Add golangci-lint config; set up benches; target zero allocations in hot path.
